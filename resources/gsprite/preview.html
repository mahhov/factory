<!--AI Generated-->
<script src="https://cdn.tailwindcss.com"></script>
<style>
	/* Custom styling for the canvas border and shadows */
	#gameCanvas {
		background-color: black; /* Dark Blue/Black background */
		/* Ensure the canvas is not blurred when scaling by forcing pixelated rendering if possible */
		image-rendering: crisp-edges;
		image-rendering: pixelated;
	}

	.container {
		border: 4px solid #334155; /* Slate 700 */
		box-shadow: 0 10px 15px rgba(0, 0, 0, 0.5);
		border-radius: 0.75rem; /* rounded-xl */
		padding: 1.5rem; /* p-6 */
		background-color: #1f2937; /* Gray-800 */
	}
</style>
<body class="bg-gray-900 flex items-center justify-center min-h-screen p-4 font-sans text-white">
	<div class="container">
		<h1 class="text-3xl font-bold mb-4 text-center text-cyan-400">Pixel Art Spritesheet (1:1 Native Resolution)</h1>
		<p class="text-center text-gray-400 mb-4">Icons drawn at their native pixel resolution (8px, 16px, 32px).</p>

		<!-- Tile Info/Tooltip Display -->
		<div id="tileInfo" class="text-center text-lg font-mono p-2 mb-4 bg-gray-700 rounded transition-colors duration-200">
			Click an icon to identify it.
		</div>

		<canvas id="gameCanvas" width="448" height="160"></canvas>

		<div id="loading" class="text-center mt-4 hidden">Initializing environment...</div>

		<!-- Legend Key -->
		<h2 class="text-xl font-semibold mt-8 mb-4 text-cyan-300 border-b border-gray-600 pb-2">Icon Legend / Key</h2>
		<div id="legend" class="grid grid-cols-2 md:grid-cols-3 gap-2 text-sm">
			<!-- Legend content generated by JavaScript -->
		</div>
	</div>

	<script>
		// --- 1. TYPE DEFINITIONS & ICON DATA (PIXEL ART BLOCKS) ---

		/**
		 * @typedef {[number, number, number, number, string]} PixelInstruction
		 * @description [X, Y, W, H, Color] defines a solid rectangle from top-left (X, Y)
		 * on the icon's native grid (e.g., 0-15 for 16x16 icon).
		 */

		/**
		 * @typedef {{size: number, pixels: PixelInstruction[], boundingBox?: [number, number, number, number], name?: string}} TileIcon
		 */

		const TILE_GAP = 8; // Margin/spacing between icons in the spritesheet layout
		const MAX_SHEET_WIDTH = 448;

		// Mapping from icon key to its friendly name for the legend/tooltip
		const ICON_NAME_MAP = {
			// Walls
			"WALL_IRON": "Iron Wall (16px)",
			"WALL_STEEL": "Steel Wall (16px)",
			"WALL_BUNKER": "Bunker (32px)",
			// Extractors
			"EXTRACTOR_T1": "Extractor (16px)",
			"EXTRACTOR_T2": "Reinforced Extractor (32px)",
			"EXTRACTOR_T3": "Quadratic Extractor (32px)",
			"EXTRACTOR_T4": "Laser Extractor (32px)",
			// Transport
			"TRANS_CONVEYOR_T1": "Conveyor (8px)",
			"TRANS_CONVEYOR_T2": "High Speed Conveyor (8px)",
			"TRANS_CONVEYOR_T3": "Packed Conveyor (8px)",
			"TRANS_DISTRIB": "Distributor (8px)",
			"TRANS_JUNCTION": "Junction (8px)",
			// Factories
			"FACTORY_STEEL": "Steel Smelter (16px)",
			"FACTORY_GLASS": "Metaglass Foundry (16px)",
			"FACTORY_PLASTEEL": "Plasteel Mixer (32px)",
			"FACTORY_THERMITE": "Thermite Forge (32px)",
			"FACTORY_EXIDIUM": "Exidium Catalyst (32px)",
			// Storage
			"STORAGE_MAT": "Storage (16px)",
			"STORAGE_DISPENSE": "Dispenser (8px)",
			"STORAGE_LIQ": "Liquid Storage (16px)",
			// Power
			"GEN_THERMAL": "Thermal Generator (16px)",
			"GEN_SOLAR": "Solar Array (16px)",
			"GEN_METHANE": "Methane Burner (32px)",
			"GEN_REACTOR": "Thermite Reactor (32px)",
			"TRANS_CONDUCTOR": "Conductor (8px)",
			"STORAGE_BATT": "Battery (16px)",
			// Fluid/Air
			"VENT_AIR": "Air Vent (8px)",
			"VENT_WATER": "Water Vent (8px)",
			"VENT_METHANE": "Methane Vent (16px)",
			"PUMP_BASE": "Pump (16px)",
			"PUMP_POWERED": "Powered Pump (16px)",
			"PUMP_WELL": "Well (32px)",
			"TRANS_PIPE_T1": "Pipe (8px)",
			// Empty
			"EMPTY": "Empty Tile",
		};


		// Icons based on their Native Pixel Resolution (8, 16, or 32)
		const ICON_DATA = (function () {
			const I = {};

			// --- PIXEL ART DEFINITIONS ---

			// --- WALLS (16x16 / 32x32) ---
			I.WALL_IRON = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#374151"], // Full Casing (Dark Grey)
					[1, 1, 14, 14, "#4b5563"], // Inner Wall
					[4, 4, 8, 8, "#6b7280"], // Central Block
				]
			};
			I.WALL_STEEL = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#374151"],
					[1, 1, 14, 14, "#4b5563"],
					[3, 3, 10, 10, "#1f2937"], // Inner Core (Darker)
					[7, 1, 2, 14, "#f87171"], [1, 7, 14, 2, "#f87171"], // Plus Reinforcement (Red)
				]
			};
			I.WALL_BUNKER = {
				size: 32, pixels: [
					[0, 0, 32, 32, "#4b5563"],
					[2, 2, 28, 28, "#1f2937"],
					[4, 4, 24, 24, "#f87171"], // Red Inner Core
					[10, 10, 12, 12, "#374151"], // Central Bunker Block
				]
			};

			// --- EXTRACTORS (16x16 / 32x32) ---
			I.EXTRACTOR_T1 = {
				size: 16, pixels: [
					[4, 4, 8, 8, "#22c55e"], // Green Casing
					[7, 0, 2, 16, "#facc15"], [0, 7, 16, 2, "#facc15"], // Yellow Shafts
					[6, 6, 4, 4, "#d97706"], // Central Intake Core
				]
			};
			I.EXTRACTOR_T2 = {
				size: 32, pixels: [
					[4, 4, 24, 24, "#22c55e"],
					[14, 0, 4, 32, "#facc15"], [0, 14, 32, 4, "#facc15"],
					[10, 10, 12, 12, "#d97706"], // Inner Core
					[12, 1, 8, 4, "#d97706"], [12, 27, 8, 4, "#d97706"], // Reinforced Caps
					[1, 12, 4, 8, "#d97706"], [27, 12, 4, 8, "#d97706"],
				]
			};
			I.EXTRACTOR_T3 = {
				size: 32, pixels: [
					[0, 0, 32, 32, "#1f2937"], // Dark Casing
					[4, 4, 24, 24, "#22c55e"],
					[14, 0, 4, 32, "#facc15"], [0, 14, 32, 4, "#facc15"],
					[10, 10, 12, 12, "#d97706"],
					[8, 8, 16, 16, "#047857"], // QUADRATIC FOCUS RING (Dark Green)
				]
			};
			I.EXTRACTOR_T4 = {
				size: 32, pixels: [
					[0, 0, 32, 32, "#1f2937"],
					[4, 4, 24, 24, "#22c55e"],
					[14, 0, 4, 32, "#facc15"], [0, 14, 32, 4, "#facc15"],
					[12, 12, 8, 8, "#ef4444"], // Red Laser Core
					[1, 1, 4, 4, "#0ea5e9"], [27, 1, 4, 4, "#0ea5e9"], // Laser Channels (Cyan)
					[1, 27, 4, 4, "#0ea5e9"], [27, 27, 4, 4, "#0ea5e9"],
				]
			};

			// --- TRANSPORT (8x8) ---
			I.TRANS_CONVEYOR_T1 = {
				size: 8, pixels: [
					[3, 0, 2, 8, "#9ca3af"], // Gray Track
					[3, 1, 2, 1, "#facc15"], [3, 4, 2, 1, "#facc15"], [3, 7, 2, 1, "#facc15"], // Yellow Arrows
				]
			};
			I.TRANS_CONVEYOR_T2 = {
				size: 8, pixels: [
					[3, 0, 2, 8, "#4b5563"], // Darker Track
					[3, 1, 2, 1, "#facc15"], [3, 2, 2, 1, "#facc15"], // Double Chevron
					[3, 5, 2, 1, "#facc15"], [3, 6, 2, 1, "#facc15"],
				]
			};
			I.TRANS_CONVEYOR_T3 = {
				size: 8, pixels: [
					[2, 0, 4, 8, "#1f2937"], // Packed Track (4px wide)
					[3, 1, 2, 1, "#3b82f6"], [3, 3, 2, 1, "#3b82f6"], [3, 5, 2, 1, "#3b82f6"], [3, 7, 2, 1, "#3b82f6"], // Blue Arrows
				]
			};
			I.TRANS_DISTRIB = {
				size: 8, pixels: [
					[3, 3, 2, 2, "#f97316"], // Orange Hub
					[3, 0, 2, 3, "#9ca3af"], [3, 5, 2, 3, "#9ca3af"],
					[0, 3, 3, 2, "#9ca3af"], [5, 3, 3, 2, "#9ca3af"], // Cross path
				]
			};
			I.TRANS_JUNCTION = {
				size: 8, pixels: [
					[0, 3, 8, 2, "#4b5563"], [3, 0, 2, 8, "#4b5563"], // Grey Cross
					[3, 3, 2, 2, "#facc15"], // Yellow Center
				]
			};

			// --- FACTORIES (16x16 / 32x32) ---
			I.FACTORY_STEEL = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#4b5563"],
					[2, 2, 12, 12, "#1f2937"],
					[4, 4, 8, 8, "#dc2626"], // Red Smelting Core
					[7, 0, 2, 16, "#f97316"], [0, 7, 16, 2, "#f97316"], // Orange Heat Channels
				]
			};
			I.FACTORY_GLASS = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#3b82f6"],
					[2, 2, 12, 12, "#0ea5e9"],
					[4, 4, 8, 8, "#ecfdf5"], // White Glass Pool
					[1, 1, 2, 2, "#fff"], [13, 1, 2, 2, "#fff"], // Corner Shimmer
					[1, 13, 2, 2, "#fff"], [13, 13, 2, 2, "#fff"],
				]
			};
			I.FACTORY_PLASTEEL = {
				size: 32, pixels: [
					[0, 0, 32, 32, "#059669"],
					[4, 4, 24, 24, "#047857"],
					[14, 1, 4, 30, "#3b82f6"], [1, 14, 30, 4, "#3b82f6"], // Blue Mixer Blades
					[12, 12, 8, 8, "#fef08a"], // Central Mixer Core
				]
			};
			I.FACTORY_THERMITE = {
				size: 32, pixels: [
					[0, 0, 32, 32, "#1f2937"],
					[4, 4, 24, 24, "#dc2626"],
					[8, 8, 16, 16, "#f97316"], // Thermite Layer
					[12, 12, 8, 8, "#fff"], // White-hot center
				]
			};
			I.FACTORY_EXIDIUM = {
				size: 32, pixels: [
					[0, 0, 32, 32, "#9333ea"], // Purple Casing
					[4, 4, 24, 24, "#4c0f88"],
					[10, 10, 12, 12, "#facc15"], // Gold Catalyst Core
					[15, 1, 2, 30, "#fff"], [1, 15, 30, 2, "#fff"], // White Energy Cross
				]
			};

			// --- STORAGE (16x16 / 8x8) ---
			I.STORAGE_MAT = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#f97316"],
					[2, 2, 12, 12, "#d97706"],
					[4, 4, 8, 2, "#fef08a"], [4, 8, 8, 2, "#fef08a"], // Stacked Materials
					[7, 0, 2, 4, "#92400e"], // Access Hatch
				]
			};
			I.STORAGE_DISPENSE = {
				size: 8, pixels: [
					[1, 1, 6, 6, "#4b5563"], // Grey Casing
					[3, 3, 2, 2, "#facc15"], // Material Core
					[3, 5, 2, 3, "#f97316"], // Output Chute
				]
			};
			I.STORAGE_LIQ = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#3b82f6"],
					[2, 2, 12, 12, "#0ea5e9"],
					[4, 4, 8, 1, "#ecfdf5"], [4, 6, 8, 1, "#ecfdf5"],
					[4, 8, 8, 1, "#ecfdf5"], [4, 10, 8, 1, "#ecfdf5"], // Fill Lines
				]
			};

			// --- POWER (16x16 / 32x32 / 8x8) ---
			I.GEN_THERMAL = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#475569"],
					[2, 2, 12, 12, "#1f2937"],
					[5, 5, 6, 6, "#dc2626"], // Red Heat Core
					[6, 4, 4, 8, "#f97316"], [4, 6, 8, 4, "#f97316"], // Orange Flame/Heat transfer
				]
			};
			I.GEN_SOLAR = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#047857"], // Dark Green Frame
					[1, 1, 14, 14, "#22c55e"], // Panel
					[3, 0, 2, 16, "#ecfdf5"], [7, 0, 2, 16, "#ecfdf5"], [11, 0, 2, 16, "#ecfdf5"], // Cell Lines
				]
			};
			I.GEN_METHANE = {
				size: 32, pixels: [
					[0, 0, 32, 32, "#374151"],
					[4, 4, 24, 24, "#22c55e"], // Green Gas Chamber
					[10, 10, 12, 12, "#dc2626"], // Central Burner
					[14, 14, 4, 4, "#fff"], // White Ignition Point
					[2, 2, 4, 4, "#facc15"], [26, 2, 4, 4, "#facc15"], // Gas Inlets
					[2, 26, 4, 4, "#facc15"], [26, 26, 4, 4, "#facc15"],
				]
			};
			I.GEN_REACTOR = {
				size: 32, pixels: [
					[0, 0, 32, 32, "#1f2937"],
					[2, 2, 28, 28, "#475569"],
					[6, 6, 20, 20, "#ef4444"], // Reactor Field (Red)
					[10, 10, 12, 12, "#fff"], // Central Core
					[15, 0, 2, 32, "#facc15"], [0, 15, 32, 2, "#facc15"], // Confinement Field
				]
			};
			I.TRANS_CONDUCTOR = {
				size: 8, pixels: [
					[3, 0, 2, 8, "#facc15"], [0, 3, 8, 2, "#facc15"], // Yellow Wires
					[3, 3, 2, 2, "#f97316"], // Orange Hub
				]
			};
			I.STORAGE_BATT = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#10b981"],
					[1, 1, 14, 14, "#047857"],
					[4, 4, 8, 8, "#facc15"], // Charge Plate
					[7, 1, 2, 14, "#fff"], [1, 7, 14, 2, "#fff"], // Plus/Charge Symbol
				]
			};

			// --- FLUID/AIR (8x8 / 16x16 / 32x32) ---
			I.VENT_AIR = {
				size: 8, pixels: [
					[1, 1, 6, 6, "#d1d5db"], // Grey Casing
					[3, 0, 2, 1, "#0ea5e9"], [3, 7, 2, 1, "#0ea5e9"],
					[0, 3, 1, 2, "#0ea5e9"], [7, 3, 1, 2, "#0ea5e9"], // Air Outlets (Cyan)
				]
			};
			I.VENT_WATER = {
				size: 8, pixels: [
					[1, 1, 6, 6, "#3b82f6"], // Blue Casing
					[3, 0, 2, 1, "#ecfdf5"], [3, 7, 2, 1, "#ecfdf5"],
					[0, 3, 1, 2, "#ecfdf5"], [7, 3, 1, 2, "#ecfdf5"], // Water Outlets (White)
				]
			};
			I.VENT_METHANE = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#22c55e"], // Green Casing
					[2, 2, 12, 12, "#1f2937"],
					[7, 0, 2, 4, "#f97316"], [0, 7, 4, 2, "#f97316"], // Methane Vents (Orange)
					[7, 12, 2, 4, "#f97316"], [12, 7, 4, 2, "#f97316"],
				]
			};
			I.PUMP_BASE = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#475569"],
					[2, 2, 12, 12, "#1f2937"],
					[7, 0, 2, 16, "#3b82f6"], [0, 7, 16, 2, "#3b82f6"], // Intake Pipes
					[6, 6, 4, 4, "#0ea5e9"], // Fluid Impeller
				]
			};
			I.PUMP_POWERED = {
				size: 16, pixels: [
					[0, 0, 16, 16, "#475569"],
					[2, 2, 12, 12, "#1f2937"],
					[7, 0, 2, 16, "#3b82f6"], [0, 7, 16, 2, "#3b82f6"],
					[6, 6, 4, 4, "#facc15"], // Powered Impeller
					[1, 1, 2, 2, "#f97316"], // Power Inlet
				]
			};
			I.PUMP_WELL = {
				size: 32, pixels: [
					[0, 0, 32, 32, "#374151"],
					[4, 4, 24, 24, "#475569"],
					[10, 10, 12, 12, "#0ea5e9"], // Water/Fluid Core
					[14, 0, 4, 32, "#3b82f6"], [0, 14, 32, 4, "#3b82f6"], // Heavy Intake Pipes
					[1, 1, 6, 6, "#facc15"], // Reinforced Corners
					[25, 1, 6, 6, "#facc15"], [1, 25, 6, 6, "#facc15"], [25, 25, 6, 6, "#facc15"],
				]
			};
			I.TRANS_PIPE_T1 = {
				size: 8, pixels: [
					[3, 0, 2, 8, "#3b82f6"], // Blue Pipe
					[3, 3, 2, 2, "#ecfdf5"], // White Pulse
				]
			};

			// Empty tile for background
			I.EMPTY = {size: 8, pixels: []};

			return I;
		})();

		// --- SPRITESHEET DATA ---
		// List of all icons to be drawn in sequential order
		const MAP_ICONS = [
			"WALL_IRON", "WALL_STEEL", "WALL_BUNKER", "EXTRACTOR_T1", "EXTRACTOR_T2", "EXTRACTOR_T3", "EXTRACTOR_T4",
			"FACTORY_STEEL", "FACTORY_GLASS", "FACTORY_PLASTEEL", "FACTORY_THERMITE", "FACTORY_EXIDIUM", "STORAGE_MAT", "STORAGE_LIQ",
			"GEN_THERMAL", "GEN_SOLAR", "GEN_METHANE", "GEN_REACTOR", "STORAGE_BATT", "STORAGE_DISPENSE", "TRANS_CONDUCTOR",
			"PUMP_BASE", "PUMP_POWERED", "PUMP_WELL", "TRANS_PIPE_T1", "VENT_AIR", "VENT_WATER", "VENT_METHANE",
			"TRANS_CONVEYOR_T1", "TRANS_CONVEYOR_T2", "TRANS_CONVEYOR_T3", "TRANS_DISTRIB", "TRANS_JUNCTION"
		];

		// Storage for the drawn sprites' bounding boxes for click detection
		const SPRITE_BOUNDS = [];


		// --- 2. DRAWING LOGIC ---

		/**
		 * Renders a TileIcon onto the canvas grid using solid pixel blocks at 1:1 resolution.
		 * @param {CanvasRenderingContext2D} ctx
		 * @param {TileIcon} instructionSet
		 * @param {number} startX The pixel X position on the canvas.
		 * @param {number} startY The pixel Y position on the canvas.
		 */
		function drawIconNative(ctx, instructionSet, startX, startY) {
			// Since we are drawing 1:1, the scale factor is 1.
			const nativePixelScale = 1;

			// Loop over all pixel block instructions: [X, Y, W, H, Color]
			for (const instruction of instructionSet.pixels) {
				const [x, y, w, h, color] = instruction;

				// 1. Convert native icon coordinates to screen pixels
				const pixelX = startX + (x * nativePixelScale);
				const pixelY = startY + (y * nativePixelScale);
				const width = w * nativePixelScale;
				const height = h * nativePixelScale;

				// 2. Set the color and draw the solid rectangle (Pixel Art Block)
				ctx.fillStyle = color;
				ctx.fillRect(pixelX, pixelY, width, height);
			}
		}

		/**
		 * Generates the legend HTML based on ICON_NAME_MAP.
		 */
		function generateLegend() {
			const legendDiv = document.getElementById('legend');
			if (!legendDiv) return;

			let html = '';
			const keys = MAP_ICONS.filter(key => key !== 'EMPTY');

			keys.sort().forEach(key => {
				const name = ICON_NAME_MAP[key] || key;
				html += `<div class="p-1 bg-gray-700 rounded-md truncate">
                            <span class="font-bold text-yellow-300 mr-2">${key}:</span>
                            ${name}
                         </div>`;
			});
			legendDiv.innerHTML = html;
		}

		/**
		 * Sets up the click listener for sprite identification.
		 */
		function setupClickListener() {
			const canvas = document.getElementById('gameCanvas');
			const tileInfoDiv = document.getElementById('tileInfo');

			if (!canvas || !tileInfoDiv) return;

			canvas.addEventListener('click', (event) => {
				const rect = canvas.getBoundingClientRect();

				// Calculate mouse position relative to the canvas
				const mouseX = event.clientX - rect.left;
				const mouseY = event.clientY - rect.top;

				let found = false;
				for (const bound of SPRITE_BOUNDS) {
					// Check if mouseX/mouseY is within the sprite's bounding box
					if (mouseX >= bound.x && mouseX < (bound.x + bound.w) &&
						mouseY >= bound.y && mouseY < (bound.y + bound.h)) {

						const name = ICON_NAME_MAP[bound.key] || bound.key;
						tileInfoDiv.textContent = `Identified: ${name} (${bound.w}x${bound.h} pixels)`;
						tileInfoDiv.classList.add('bg-cyan-800');
						tileInfoDiv.classList.remove('bg-gray-700');
						found = true;
						break;
					}
				}

				if (!found) {
					tileInfoDiv.textContent = `Click an icon to identify it.`;
					tileInfoDiv.classList.remove('bg-cyan-800');
					tileInfoDiv.classList.add('bg-gray-700');
				}
			});
		}


		/**
		 * The main drawing loop, calculating dynamic layout.
		 */
		function drawMap() {
			const canvas = document.getElementById('gameCanvas');
			const ctx = canvas.getContext('2d');

			if (!ctx) {
				console.error("Error: Canvas context not available.");
				return;
			}

			// --- Dynamic Layout Calculation ---
			let currentX = TILE_GAP;
			let currentY = TILE_GAP;
			let maxRowHeight = 0;

			SPRITE_BOUNDS.length = 0; // Clear bounds for fresh calculation

			// First pass to calculate bounds and required canvas height
			for (let i = 0; i < MAP_ICONS.length; i++) {
				const iconKey = MAP_ICONS[i];
				const instructionSet = ICON_DATA[iconKey];
				const iconSize = instructionSet.size || 0;

				// Check for wrap
				if (currentX + iconSize + TILE_GAP > MAX_SHEET_WIDTH) {
					// Move to the next row
					currentX = TILE_GAP;
					currentY += maxRowHeight + TILE_GAP;
					maxRowHeight = 0;
				}

				// Store bounding box for click detection
				SPRITE_BOUNDS.push({
					key: iconKey,
					x: currentX,
					y: currentY,
					w: iconSize,
					h: iconSize
				});

				// Update position trackers
				currentX += iconSize + TILE_GAP;
				maxRowHeight = Math.max(maxRowHeight, iconSize);
			}

			// Calculate final required height
			const finalHeight = currentY + maxRowHeight + TILE_GAP;

			// Resize canvas to fit the dynamically wrapped sprites
			canvas.width = MAX_SHEET_WIDTH;
			canvas.height = finalHeight;

			// Clear the canvas
			ctx.fillStyle = 'black';
			ctx.fillRect(0, 0, canvas.width, canvas.height);

			// --- Drawing Phase ---
			// Draw a small grey box around each sprite to show boundaries
			ctx.strokeStyle = '#334155'; // Slate 700
			ctx.lineWidth = 1;

			for (const bound of SPRITE_BOUNDS) {
				// Draw the boundary box first (optional)
				ctx.strokeRect(bound.x - 0.5, bound.y - 0.5, bound.w + 1, bound.h + 1);

				// Draw the icon itself
				drawIconNative(ctx, ICON_DATA[bound.key], bound.x, bound.y);
			}
		}

		// --- 3. INITIALIZATION ---

		window.onload = () => {
			drawMap();
			generateLegend();
			setupClickListener();
		};

	</script>
</body>
